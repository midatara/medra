<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Insumos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.sheetjs.com/xlsx-0.18.5/package/dist/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="ingresos.css">
</head>
<body>
    <div class="registrar-main-container">
        <h1 class="registrar-title">Registrar Insumos</h1>
        <div id="registrar-message"></div>
        <div class="registrar-fields-container">
            <div class="registrar-first-row">
                <div class="registrar-form-group">
                    <label class="registrar-label" for="admision">Admisión:</label>
                    <input type="text" id="admision" maxlength="10" autocomplete="off">
                </div>
                <div class="registrar-form-group">
                    <label class="registrar-label" for="paciente">Paciente:</label>
                    <input type="text" id="paciente" autocomplete="off">
                </div>
                <div class="registrar-form-group medico-input-container">
                    <label class="registrar-label" for="medico">Médico:</label>
                    <div class="medico-input-wrapper">
                        <input type="text" id="medico" autocomplete="off">
                        <i class="fas fa-clipboard-list medico-icon" id="medicoToggle"></i>
                    </div>
                    <div class="medico-dropdown" id="medicoDropdown"></div>
                </div>
                <div class="registrar-form-group">
                    <label class="registrar-label" for="fechaCX">Fecha CX:</label>
                    <input type="date" id="fechaCX" autocomplete="off">
                </div>
                <div class="registrar-form-group codigo-input-container">
                    <label class="registrar-label" for="codigo">Código:</label>
                    <div class="codigo-input-wrapper">
                        <input type="text" id="codigo" autocomplete="off">
                        <i class="fas fa-clipboard-list codigo-icon" id="codigoToggle"></i>
                    </div>
                    <div class="codigo-dropdown" id="codigoDropdown"></div>
                </div>
                <div class="registrar-form-group descripcion-input-container">
                    <label class="registrar-label" for="descripcion">Descripción:</label>
                    <div class="descripcion-input-wrapper">
                        <input type="text" id="descripcion" autocomplete="off">
                        <i class="fas fa-clipboard-list descripcion-icon" id="descripcionToggle"></i>
                    </div>
                    <div class="descripcion-dropdown" id="descripcionDropdown"></div>
                </div>
                <div class="registrar-form-group registrar-form-type">
                    <label><input type="radio" name="atributoFilter" value="CONSIGNACION" checked> Consignación</label>
                    <label><input type="radio" name="atributoFilter" value="COTIZACION"> Cotización</label>
                </div>
                <div class="registrar-form-group">
                    <label class="registrar-label" for="cantidad">Cantidad:</label>
                    <input type="number" id="cantidad" min="1" autocomplete="off">
                </div>
                <div class="registrar-form-group button-group">
                    <button id="registrarBtn" class="modal-btn modal-btn-primary">Registrar</button>
                </div>
                <div class="registrar-form-group button-group">
                    <button id="limpiarBtn" class="modal-btn modal-btn-secondary">Limpiar</button>
                </div>
            </div>
            <div class="registrar-second-row">
                <div class="registrar-form-group">
                    <label class="registrar-label" for="referencia">Referencia:</label>
                    <input type="text" id="referencia" disabled>
                </div>
                <div class="registrar-form-group">
                    <label class="registrar-label" for="proveedor">Proveedor:</label>
                    <input type="text" id="proveedor" disabled>
                </div>
                <div class="registrar-form-group">
                    <label class="registrar-label" for="precioUnitario">Precio Unitario:</label>
                    <input type="number" id="precioUnitario" disabled>
                </div>
                <div class="registrar-form-group">
                    <label class="registrar-label" for="atributo">Atributo:</label>
                    <input type="text" id="atributo" disabled>
                </div>
                <div class="registrar-form-group">
                    <label class="registrar-label" for="totalItems">Total Items:</label>
                    <input type="text" id="totalItems" disabled>
                </div>
                <div class="registrar-form-group">
                    <label class="registrar-label" for="docDelivery">Doc. Delivery:</label>
                    <div class="doc-delivery-wrapper">
                        <input type="text" id="docDelivery" autocomplete="off" class="doc-delivery-input">
                        <span id="guiaStatus" class="doc-delivery-status"></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="registrar-table-container">
            <table class="registrar-table" id="registrarTable">
                <thead>
                    <tr>
                        <th>Admisión<div class="resize-handle"></div></th>
                        <th>Paciente<div class="resize-handle"></div></th>
                        <th>Médico<div class="resize-handle"></div></th>
                        <th>Fecha CX<div class="resize-handle"></div></th>
                        <th>Código<div class="resize-handle"></div></th>
                        <th>Descripción<div class="resize-handle"></div></th>
                        <th>Cantidad<div class="resize-handle"></div></th>
                        <th>Referencia<div class="resize-handle"></div></th>
                        <th>Proveedor<div class="resize-handle"></div></th>
                        <th>Precio Unitario<div class="resize-handle"></div></th>
                        <th>Atributo<div class="resize-handle"></div></th>
                        <th>Total Items<div class="resize-handle"></div></th>
                        <th>Doc. Delivery<div class="resize-handle"></div></th>
                        <th>Usuario<div class="resize-handle"></div></th>
                        <th>Acciones<div class="resize-handle"></div></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="registrar-traspasar-container" style="text-align: center; margin-top: 15px;">
            <button id="traspasarBtn" class="modal-btn modal-btn-danger" disabled>
                TRASPASAR REGISTROS
            </button>
        </div>
        <div class="registrar-pagination">
            <div id="loadMoreContainer" style="display: none;"></div>
        </div>
        <div id="loading" class="loading-modal">
            <div class="spinner"></div>
            <span class="loading-text">Cargando...</span>
        </div>
    </div>

    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Editar Registro</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-content-body">
                <div class="edit-form-grid">
                    <!-- Fila 1 -->
                    <div class="modal-form-group">
                        <label for="editAdmision">Admisión</label>
                        <input type="text" id="editAdmision" placeholder="Ingrese Admisión">
                    </div>
                    <div class="modal-form-group">
                        <label for="editPaciente">Paciente</label>
                        <input type="text" id="editPaciente" placeholder="Ingrese Paciente">
                    </div>
                    <div class="modal-form-group">
                        <label for="editMedico">Médico</label>
                        <div class="medico-input-container">
                            <div class="medico-input-wrapper">
                                <input type="text" id="editMedico" placeholder="Seleccione Médico">
                                <span id="editMedicoToggle" class="medico-icon"><i class="fas fa-chevron-down"></i></span>
                            </div>
                            <div id="editMedicoDropdown" class="medico-dropdown"></div>
                        </div>
                    </div>
                    <div class="modal-form-group">
                        <label for="editFechaCX">Fecha Cx</label>
                        <input type="date" id="editFechaCX">
                    </div>
                    <!-- Fila 2 -->
                    <div class="modal-form-group">
                        <label for="editCodigo">Código</label>
                        <div class="codigo-input-container">
                            <div class="codigo-input-wrapper">
                                <input type="text" id="editCodigo" placeholder="Ingrese Código">
                                <span id="editCodigoToggle" class="codigo-icon"><i class="fas fa-chevron-down"></i></span>
                            </div>
                            <div id="editCodigoDropdown" class="codigo-dropdown"></div>
                        </div>
                    </div>
                    <div class="modal-form-group">
                        <label for="editDescripcion">Descripción</label>
                        <div class="descripcion-input-container">
                            <div class="descripcion-input-wrapper">
                                <input type="text" id="editDescripcion" placeholder="Ingrese Descripción">
                                <span id="editDescripcionToggle" class="descripcion-icon"><i class="fas fa-chevron-down"></i></span>
                            </div>
                            <div id="editDescripcionDropdown" class="descripcion-dropdown"></div>
                        </div>
                    </div>
                    <div class="modal-form-group">
                        <label for="editCantidad">Cantidad</label>
                        <input type="number" id="editCantidad" placeholder="Ingrese Cantidad">
                    </div>
                    <!-- Fila 3 -->
                    <div class="modal-form-group">
                        <label for="editReferencia">Referencia</label>
                        <input type="text" id="editReferencia" placeholder="Referencia" readonly>
                    </div>
                    <div class="modal-form-group">
                        <label for="editProveedor">Proveedor</label>
                        <input type="text" id="editProveedor" placeholder="Proveedor" readonly>
                    </div>
                    <div class="modal-form-group">
                        <label for="editPrecioUnitario">Precio Unitario</label>
                        <input type="text" id="editPrecioUnitario" placeholder="Precio Unitario" readonly>
                    </div>
                    <!-- Fila 4 -->
                    <div class="modal-form-group">
                        <label for="editAtributo">Atributo</label>
                        <input type="text" id="editAtributo" placeholder="Atributo" readonly>
                    </div>
                    <div class="modal-form-group">
                        <label for="editTotalItems">Total Items</label>
                        <input type="text" id="editTotalItems" placeholder="Total" readonly>
                    </div>
                    <div class="modal-form-group">
                        <label for="editDocDelivery">Doc. Delivery</label>
                        <div class="doc-delivery-wrapper">
                            <input type="text" id="editDocDelivery" class="doc-delivery-input" placeholder="Ingrese Doc. Delivery">
                            <span id="editGuiaStatus" class="doc-delivery-status"></span>
                        </div>
                    </div>
                    <div class="modal-form-group">
                        <label>Atributo Filtro</label>
                        <div class="radio-group">
                            <label><input type="radio" name="editAtributoFilter" value="CONSIGNACION" checked> Consignación</label>
                            <label><input type="radio" name="editAtributoFilter" value="VENTA"> Venta</label>
                        </div>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button id="saveEditBtn" class="modal-btn modal-btn-primary">Guardar</button>
                    <button id="cancelEditBtn" class="modal-btn modal-btn-secondary">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Confirmar Eliminación</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-content-body">
                <p class="delete-modal-text">¿Estás seguro de que deseas eliminar este registro?</p>
                <div class="modal-buttons">
                    <button class="modal-btn modal-btn-danger" id="confirmDeleteBtn">Eliminar</button>
                    <button class="modal-btn modal-btn-secondary" id="cancelDeleteBtn">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    <div class="registrar-toast-container" id="toastContainer"></div>

    <script type="module" src="ingresos.js"></script>
    <script type="module" src="resizeColumns.js"></script>
</body>
</html>